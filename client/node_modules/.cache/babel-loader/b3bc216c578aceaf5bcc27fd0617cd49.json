{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\DAMB-Marketplace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\DAMB-Marketplace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\DAMB-Marketplace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\DAMB-Marketplace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\DAMB-Marketplace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\DAMB-Marketplace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\DAMB-Marketplace\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Desktop\\\\DAMB-Marketplace\\\\client\\\\src\\\\routes\\\\Consume.tsx\";\nimport React, { Component } from 'react';\nimport Route from '../components/templates/Route';\nimport Button from '../components/atoms/Button';\nimport Web3 from 'web3';\nimport { Ocean } from '@oceanprotocol/squid';\nvar web3;\n\nvar Consume =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Consume, _Component);\n\n  function Consume() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Consume);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Consume)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      ocean: undefined,\n      results: [],\n      ddo: undefined\n    };\n    return _this;\n  }\n\n  _createClass(Consume, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var ocean;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                web3 = new Web3(window.web3.currentProvider);\n                window.ethereum.enable();\n                _context.next = 4;\n                return Ocean.getInstance({\n                  web3Provider: web3,\n                  nodeUri: 'https://nile.dev-ocean.com',\n                  aquariusUri: 'https://aquarius.marketplace.dev-ocean.com',\n                  brizoUri: 'https://brizo.marketplace.dev-ocean.com',\n                  brizoAddress: '0x4aaab179035dc57b35e2ce066919048686f82972',\n                  secretStoreUri: 'https://secret-store.nile.dev-ocean.com',\n                  verbose: true\n                });\n\n              case 4:\n                ocean = _context.sent;\n                this.setState({\n                  ocean: ocean\n                });\n                console.log('Finished loading contracts.');\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"consumeAsset\",\n    value: function () {\n      var _consumeAsset = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var accounts, _consumeAsset2, service, agreement;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return this.state.ocean.accounts.list();\n\n              case 3:\n                accounts = _context2.sent;\n                // get our registered asset\n                _consumeAsset2 = this.state.ddo; // get service we want to execute\n\n                service = _consumeAsset2.findServiceByType('access'); // order service agreement\n\n                _context2.next = 8;\n                return this.state.ocean.assets.order(_consumeAsset2.id, service.index, accounts[0]);\n\n              case 8:\n                agreement = _context2.sent;\n                _context2.next = 11;\n                return this.state.ocean.assets.consume(agreement, _consumeAsset2.id, service.index, accounts[0], '', 0);\n\n              case 11:\n                _context2.next = 16;\n                break;\n\n              case 13:\n                _context2.prev = 13;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.error(_context2.t0.message);\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 13]]);\n      }));\n\n      function consumeAsset() {\n        return _consumeAsset.apply(this, arguments);\n      }\n\n      return consumeAsset;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Route, {\n        title: \"Consume\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, \"Copy Code and Paste on HTML \"), React.createElement(\"code\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Corporis iusto consequatur nemo corrupti eos illum, velit facilis maxime consequuntur inventore quibusdam quae, ducimus autem in. Sed perferendis laudantium distinctio dolor.            \"), React.createElement(\"div\", {\n        style: {\n          float: 'left',\n          marginTop: '2rem',\n          display: 'block'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          margin: '100px',\n          display: 'inline'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(Button, {\n        primary: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \"Publish Data\")), React.createElement(Button, {\n        primary: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"Download\")));\n    }\n  }]);\n\n  return Consume;\n}(Component);\n\nexport default Consume;","map":{"version":3,"sources":["C:\\Users\\ASUS\\Desktop\\DAMB-Marketplace\\client\\src\\routes\\Consume.tsx"],"names":["React","Component","Route","Button","Web3","Ocean","web3","Consume","state","ocean","undefined","results","ddo","window","currentProvider","ethereum","enable","getInstance","web3Provider","nodeUri","aquariusUri","brizoUri","brizoAddress","secretStoreUri","verbose","setState","console","log","accounts","list","consumeAsset","service","findServiceByType","assets","order","id","index","agreement","consume","error","message","float","marginTop","display","margin"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Route from '../components/templates/Route'\r\nimport Button from '../components/atoms/Button'\r\nimport Web3 from 'web3'\r\nimport { Ocean } from '@oceanprotocol/squid'\r\n\r\n\r\nlet web3\r\n\r\nclass Consume extends Component {\r\n\r\n    state = {\r\n        ocean: undefined,\r\n        results: [],\r\n        ddo: undefined\r\n    }\r\n\r\n\r\n    async componentDidMount() {\r\n        web3 = new Web3(window.web3.currentProvider)\r\n        window.ethereum.enable()\r\n\r\n        const ocean = await Ocean.getInstance({\r\n            web3Provider: web3,\r\n            nodeUri: 'https://nile.dev-ocean.com',\r\n            aquariusUri: 'https://aquarius.marketplace.dev-ocean.com',\r\n            brizoUri: 'https://brizo.marketplace.dev-ocean.com',\r\n            brizoAddress: '0x4aaab179035dc57b35e2ce066919048686f82972',\r\n            secretStoreUri: 'https://secret-store.nile.dev-ocean.com',\r\n            verbose: true\r\n        })\r\n        this.setState({ ocean })\r\n        console.log('Finished loading contracts.')\r\n    }\r\n\r\n    async consumeAsset() {\r\n        try {\r\n          // get all accounts\r\n          const accounts = await this.state.ocean.accounts.list()\r\n          // get our registered asset\r\n          const consumeAsset = this.state.ddo\r\n          // get service we want to execute\r\n          const service = consumeAsset.findServiceByType('access')\r\n          // order service agreement\r\n          const agreement = await this.state.ocean.assets.order(\r\n            consumeAsset.id,\r\n            service.index,\r\n            accounts[0]\r\n          )\r\n          // consume it\r\n          await this.state.ocean.assets.consume(\r\n            agreement,\r\n            consumeAsset.id,\r\n            service.index,\r\n            accounts[0],\r\n            '',\r\n            0\r\n          )\r\n        } catch (error) {\r\n          console.error(error.message)\r\n        }\r\n      }\r\n\r\n    public render() {\r\n        return <Route title=\"Consume\">\r\n            <h3>Copy Code and Paste on HTML </h3>\r\n            <code>\r\n                Lorem, ipsum dolor sit amet consectetur adipisicing elit. Corporis iusto consequatur nemo corrupti eos illum, velit facilis maxime consequuntur inventore quibusdam quae, ducimus autem in. Sed perferendis laudantium distinctio dolor.            </code>\r\n\r\n            <div style={{ float: 'left', marginTop: '2rem', display: 'block' }}>\r\n                <div style={{ margin: '100px', display: 'inline' }}>\r\n                    <Button primary>Publish Data</Button>\r\n                </div>\r\n                <Button primary>Download</Button>\r\n            </div>\r\n\r\n        </Route>\r\n    }\r\n}\r\n\r\nexport default Consume\r\n"]},"metadata":{},"sourceType":"module"}